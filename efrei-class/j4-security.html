<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui"><title>J4 : Sécurité en PHP</title><link rel="stylesheet" href="node_modules/reveal.js/dist/reset.css"><link rel="stylesheet" href="node_modules/reveal.js/dist/reveal.css"><link rel="stylesheet" href="node_modules/reveal.js/dist/theme/beige.css" id="theme"><!--This CSS is generated by the Asciidoctor reveal.js converter to further integrate AsciiDoc's existing semantic with reveal.js--><style type="text/css">.reveal div.right {
  float: right
}

/* source blocks */
.reveal .listingblock.stretch > .content {
  height: 100%
}

.reveal .listingblock.stretch > .content > pre {
  height: 100%
}

.reveal .listingblock.stretch > .content > pre > code {
  height: 100%;
  max-height: 100%
}

/* auto-animate feature */
/* hide the scrollbar when auto-animating source blocks */
.reveal pre[data-auto-animate-target] {
  overflow: hidden;
}

.reveal pre[data-auto-animate-target] code {
  overflow: hidden;
}

/* add a min width to avoid horizontal shift on line numbers */
code.hljs .hljs-ln-line.hljs-ln-n {
  min-width: 1.25em;
}

/* tables */
table {
  border-collapse: collapse;
  border-spacing: 0
}

table {
  margin-bottom: 1.25em;
  border: solid 1px #dedede
}

table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td {
  padding: .5em .625em .625em;
  font-size: inherit;
  text-align: left
}

table tr th, table tr td {
  padding: .5625em .625em;
  font-size: inherit
}

table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td {
  display: table-cell;
  line-height: 1.6
}

td.tableblock > .content {
  margin-bottom: 1.25em
}

td.tableblock > .content > :last-child {
  margin-bottom: -1.25em
}

table.tableblock, th.tableblock, td.tableblock {
  border: 0 solid #dedede
}

table.grid-all > thead > tr > .tableblock, table.grid-all > tbody > tr > .tableblock {
  border-width: 0 1px 1px 0
}

table.grid-all > tfoot > tr > .tableblock {
  border-width: 1px 1px 0 0
}

table.grid-cols > * > tr > .tableblock {
  border-width: 0 1px 0 0
}

table.grid-rows > thead > tr > .tableblock, table.grid-rows > tbody > tr > .tableblock {
  border-width: 0 0 1px
}

table.grid-rows > tfoot > tr > .tableblock {
  border-width: 1px 0 0
}

table.grid-all > * > tr > .tableblock:last-child, table.grid-cols > * > tr > .tableblock:last-child {
  border-right-width: 0
}

table.grid-all > tbody > tr:last-child > .tableblock, table.grid-all > thead:last-child > tr > .tableblock, table.grid-rows > tbody > tr:last-child > .tableblock, table.grid-rows > thead:last-child > tr > .tableblock {
  border-bottom-width: 0
}

table.frame-all {
  border-width: 1px
}

table.frame-sides {
  border-width: 0 1px
}

table.frame-topbot, table.frame-ends {
  border-width: 1px 0
}

.reveal table th.halign-left, .reveal table td.halign-left {
  text-align: left
}

.reveal table th.halign-right, .reveal table td.halign-right {
  text-align: right
}

.reveal table th.halign-center, .reveal table td.halign-center {
  text-align: center
}

.reveal table th.valign-top, .reveal table td.valign-top {
  vertical-align: top
}

.reveal table th.valign-bottom, .reveal table td.valign-bottom {
  vertical-align: bottom
}

.reveal table th.valign-middle, .reveal table td.valign-middle {
  vertical-align: middle
}

table thead th, table tfoot th {
  font-weight: bold
}

tbody tr th {
  display: table-cell;
  line-height: 1.6
}

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p {
  font-weight: bold
}

thead {
  display: table-header-group
}

.reveal table.grid-none th, .reveal table.grid-none td {
  border-bottom: 0 !important
}

/* kbd macro */
kbd {
  font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace;
  display: inline-block;
  color: rgba(0, 0, 0, .8);
  font-size: .65em;
  line-height: 1.45;
  background: #f7f7f7;
  border: 1px solid #ccc;
  -webkit-border-radius: 3px;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, .2), 0 0 0 .1em white inset;
  box-shadow: 0 1px 0 rgba(0, 0, 0, .2), 0 0 0 .1em #fff inset;
  margin: 0 .15em;
  padding: .2em .5em;
  vertical-align: middle;
  position: relative;
  top: -.1em;
  white-space: nowrap
}

.keyseq kbd:first-child {
  margin-left: 0
}

.keyseq kbd:last-child {
  margin-right: 0
}

/* callouts */
.conum[data-value] {
  display: inline-block;
  color: #fff !important;
  background: rgba(0, 0, 0, .8);
  -webkit-border-radius: 50%;
  border-radius: 50%;
  text-align: center;
  font-size: .75em;
  width: 1.67em;
  height: 1.67em;
  line-height: 1.67em;
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  font-style: normal;
  font-weight: bold
}

.conum[data-value] * {
  color: #fff !important
}

.conum[data-value] + b {
  display: none
}

.conum[data-value]:after {
  content: attr(data-value)
}

pre .conum[data-value] {
  position: relative;
  top: -.125em
}

b.conum * {
  color: inherit !important
}

.conum:not([data-value]):empty {
  display: none
}

/* Callout list */
.hdlist > table, .colist > table {
  border: 0;
  background: none
}

.hdlist > table > tbody > tr, .colist > table > tbody > tr {
  background: none
}

td.hdlist1, td.hdlist2 {
  vertical-align: top;
  padding: 0 .625em
}

td.hdlist1 {
  font-weight: bold;
  padding-bottom: 1.25em
}

/* Disabled from Asciidoctor CSS because it caused callout list to go under the
 * source listing when .stretch is applied (see #335)
 * .literalblock+.colist,.listingblock+.colist{margin-top:-.5em} */
.colist td:not([class]):first-child {
  padding: .4em .75em 0;
  line-height: 1;
  vertical-align: top
}

.colist td:not([class]):first-child img {
  max-width: none
}

.colist td:not([class]):last-child {
  padding: .25em 0
}

/* Override Asciidoctor CSS that causes issues with reveal.js features */
.reveal .hljs table {
  border: 0
}

/* Callout list rows would have a bottom border with some reveal.js themes (see #335) */
.reveal .colist > table th, .reveal .colist > table td {
  border-bottom: 0
}

/* Fixes line height with Highlight.js source listing when linenums enabled (see #331) */
.reveal .hljs table thead tr th, .reveal .hljs table tfoot tr th, .reveal .hljs table tbody tr td, .reveal .hljs table tr td, .reveal .hljs table tfoot tr td {
  line-height: inherit
}

/* Columns layout */
.columns .slide-content {
  display: flex;
}

.columns.wrap .slide-content {
  flex-wrap: wrap;
}

.columns.is-vcentered .slide-content {
  align-items: center;
}

.columns .slide-content > .column {
  display: block;
  flex-basis: 0;
  flex-grow: 1;
  flex-shrink: 1;
}

.columns .slide-content > .column > * {
  padding: .75rem;
}

/* See #353 */
.columns.wrap .slide-content > .column {
  flex-basis: auto;
}

.columns .slide-content > .column.is-full {
  flex: none;
  width: 100%;
}

.columns .slide-content > .column.is-four-fifths {
  flex: none;
  width: 80%;
}

.columns .slide-content > .column.is-three-quarters {
  flex: none;
  width: 75%;
}

.columns .slide-content > .column.is-two-thirds {
  flex: none;
  width: 66.6666%;
}

.columns .slide-content > .column.is-three-fifths {
  flex: none;
  width: 60%;
}

.columns .slide-content > .column.is-half {
  flex: none;
  width: 50%;
}

.columns .slide-content > .column.is-two-fifths {
  flex: none;
  width: 40%;
}

.columns .slide-content > .column.is-one-third {
  flex: none;
  width: 33.3333%;
}

.columns .slide-content > .column.is-one-quarter {
  flex: none;
  width: 25%;
}

.columns .slide-content > .column.is-one-fifth {
  flex: none;
  width: 20%;
}

.columns .slide-content > .column.has-text-left {
  text-align: left;
}

.columns .slide-content > .column.has-text-justified {
  text-align: justify;
}

.columns .slide-content > .column.has-text-right {
  text-align: right;
}

.columns .slide-content > .column.has-text-left {
  text-align: left;
}

.columns .slide-content > .column.has-text-justified {
  text-align: justify;
}

.columns .slide-content > .column.has-text-right {
  text-align: right;
}

.text-left {
  text-align: left !important
}

.text-right {
  text-align: right !important
}

.text-center {
  text-align: center !important
}

.text-justify {
  text-align: justify !important
}

.footnotes {
  border-top: 1px solid rgba(0, 0, 0, 0.2);
  padding: 0.5em 0 0 0;
  font-size: 0.65em;
  margin-top: 4em;
}

.byline {
  font-size:.8em
}
ul.byline {
  list-style-type: none;
}
ul.byline li + li {
  margin-top: 0.25em;
}
</style><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/v4-shims.min.css"></head><body><div class="reveal"><div class="slides"><section class="title" data-state="title"><h1>J4 </h1><h2>Sécurité en PHP</h2></section><section><section id="_gestion_des_entrées_utilisateurs_échapper_et_valider_les_données"><h2>Gestion des entrées utilisateurs, échapper et valider les données</h2><div class="slide-content"><div class="paragraph"><p>La gestion des entrées utilisateurs, l&#8217;échappement et la validation des données sont des aspects cruciaux de la sécurité et de la robustesse dans une application PHP.</p></div></div></section><section id=""><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Mal gérées, les entrées utilisateurs peuvent exposer votre application à des failles de sécurité telles que:</p></div>
<div class="ulist"><ul><li class="fragment"><p>les injections SQL,</p></li><li class="fragment"><p>les attaques XSS (Cross-Site Scripting)</p></li><li class="fragment"><p>d&#8217;autres formes d&#8217;exploitation.</p></li></ul></div></div></section></section>
<section><section id="_validation_des_données"><h2>Validation des données</h2><div class="slide-content"><div class="paragraph"><p>La validation des données consiste à vérifier que les données saisies par l&#8217;utilisateur respectent certaines règles avant de les traiter ou de les stocker.</p></div></div></section><section id="_2"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Cela permet de s&#8217;assurer que les données sont dans le format attendu et qu&#8217;elles sont valides.</p></div></div></section></section>
<section><section id="_types_de_validation"><h2>Types de validation</h2></section><section id="_validation_côté_serveur"><h2>Validation côté serveur :</h2><div class="slide-content"><div class="paragraph"><p>S&#8217;assure que les données reçues par le serveur sont correctes. C&#8217;est la dernière ligne de défense.</p></div></div></section><section id="_validation_côté_client"><h2>Validation côté client :</h2><div class="slide-content"><div class="paragraph"><p>Permet d&#8217;améliorer l&#8217;expérience utilisateur en validant les données avant de les envoyer au serveur, mais ne doit jamais remplacer la validation côté serveur.</p></div></div></section></section>
<section><section id="_techniques_de_validation_en_php"><h2>Techniques de validation en PHP</h2><div class="slide-content"><div class="paragraph"><p>PHP propose des fonctions et des filtres natifs pour valider les données reçues via des formulaires ou d&#8217;autres sources d&#8217;entrée.</p></div></div></section><section id="_validation_avec_filter_var"><h2>Validation avec filter_var()</h2><div class="slide-content"><div class="paragraph"><p>La fonction filter_var() permet de valider et de filtrer différents types de données.</p></div></div></section><section id="_3"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Elle prend un filtre en paramètre pour déterminer le type de validation à effectuer.</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">$email = "boris.rose@gmail.com";
if (filter_var($email, FILTER_VALIDATE_EMAIL)) {
    echo "Email valide.";
} else {
    echo "Email invalide.";
}</code></pre></div></div></div></section><section id="_filter_validate_email"><h2>FILTER_VALIDATE_EMAIL :</h2><div class="slide-content"><div class="paragraph"><p>Valide si la chaîne est un email valide.</p></div></div></section><section id="_filter_validate_int"><h2>FILTER_VALIDATE_INT :</h2><div class="slide-content"><div class="paragraph"><p>Valide si la chaîne est un entier.</p></div></div></section><section id="_filter_validate_url"><h2>FILTER_VALIDATE_URL :</h2><div class="slide-content"><div class="paragraph"><p>Valide si la chaîne est une URL.</p></div></div></section><section id="_validation_de_chaînes_de_caractères"><h2>Validation de chaînes de caractères</h2><div class="slide-content"><div class="paragraph"><p>Lorsque vous recevez des chaînes de caractères (comme un nom ou une adresse), vous pouvez utiliser des fonctions comme:</p></div>
<div class="ulist"><ul><li class="fragment"><p>preg_match()</p></li><li class="fragment"><p>ctype_*() pour vérifier que la chaîne correspond à un certain format.</p></li></ul></div></div></section><section id="_exemple_de_validation_avec_une_expression_régulière_vérification_dun_nom"><h2>Exemple de validation avec une expression régulière (vérification d&#8217;un nom) :</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">$nom = "Tintin Milou";
if (preg_match("/^[a-zA-Z\s'-]+$/", $nom)) {
    echo "Nom valide.";
} else {
    echo "Nom invalide.";
}</code></pre></div></div></div></section><section id="_exemple_avec_ctype_alnum"><h2>Exemple avec ctype_alnum() :</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">$pseudo = "User123";
if (ctype_alnum($pseudo)) {
    echo "Pseudo valide.";
} else {
    echo "Pseudo invalide.";
}</code></pre></div></div></div></section><section id="_validation_des_dates"><h2>Validation des dates</h2><div class="slide-content"><div class="paragraph"><p>Pour valider une date, PHP offre la classe DateTime qui permet de vérifier si une chaîne correspond à une date valide.</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">$date = "2024-09-07";
$dateObject = DateTime::createFromFormat('Y-m-d', $date);
if ($dateObject &amp;&amp; $dateObject-&gt;format('Y-m-d') === $date) {
    echo "Date valide.";
} else {
    echo "Date invalide.";
}</code></pre></div></div></div></section></section>
<section><section id="_échapper_les_données"><h2>Échapper les données</h2><div class="slide-content"><div class="paragraph"><p>L&#8217;échappement des données consiste à traiter les données avant de les afficher ou de les stocker afin d&#8217;éviter les injections (injections SQL, XSS, etc.).</p></div></div></section><section id="_4"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Cela protège votre application contre des attaques où un utilisateur pourrait insérer du code malveillant dans une entrée.</p></div></div></section><section id="_échapper_pour_la_base_de_données_prévention_des_injections_sql"><h2>Échapper pour la base de données (prévention des injections SQL)</h2><div class="slide-content"><div class="paragraph"><p>L&#8217;une des vulnérabilités les plus courantes dans les applications PHP est l&#8217;injection SQL.</p></div></div></section><section id="_5"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Cela se produit lorsque des données utilisateur non échappées sont directement insérées dans des requêtes SQL, permettant à un attaquant de manipuler la requête SQL exécutée.</p></div></div></section><section id="_utiliser_des_requêtes_préparées_avec_pdo"><h2>Utiliser des requêtes préparées avec PDO</h2><div class="slide-content"><div class="paragraph"><p>La meilleure façon de prévenir les injections SQL est d&#8217;utiliser les requêtes préparées avec PDO.</p></div></div></section><section id="_6"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Elles permettent d&#8217;échapper automatiquement les valeurs des paramètres avant qu&#8217;ils ne soient insérés dans la requête SQL.</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">$pdo = new PDO('mysql:host=localhost;dbname=boris_db', 'root', '');

// Requête préparée pour prévenir les injections SQL
$query = $pdo-&gt;prepare("SELECT * FROM utilisateurs WHERE email = :email");
$query-&gt;execute(['email' =&gt; $_POST['email']]);
$utilisateur = $query-&gt;fetch();</code></pre></div></div>
<div class="paragraph"><p>Dans cet exemple, la valeur fournie par l&#8217;utilisateur est automatiquement échappée par PDO, empêchant toute injection SQL.</p></div></div></section><section id="_éviter_lutilisation_directe_de_variables_dans_les_requêtes"><h2>Éviter l&#8217;utilisation directe de variables dans les requêtes</h2><div class="slide-content"><div class="paragraph"><p>Ne construisez jamais manuellement vos requêtes SQL en insérant directement des données utilisateurs :</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">// Mauvaise pratique (vulnérable aux injections SQL)
$query = "SELECT * FROM utilisateurs WHERE email = '" . $_POST['email'] . "'";</code></pre></div></div></div></section><section id="_7"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Cette approche est vulnérable aux attaques par injection SQL, où un attaquant pourrait insérer du code malveillant dans les données.</p></div></div></section><section id="_échapper_pour_le_html_prévention_des_attaques_xss"><h2>Échapper pour le HTML (prévention des attaques XSS)</h2><div class="slide-content"><div class="paragraph"><p>Les attaques XSS (Cross-Site Scripting) se produisent lorsque des données non échappées sont affichées dans une page web, permettant à un attaquant d&#8217;insérer du code JavaScript malveillant.</p></div></div></section><section id="_8"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>La solution consiste à échapper les données avant de les afficher dans une page HTML.</p></div></div></section><section id="_utiliser_htmlspecialchars"><h2>Utiliser htmlspecialchars()</h2><div class="slide-content"><div class="paragraph"><p>Pour échapper les caractères spéciaux dans une chaîne de caractères avant de l&#8217;afficher dans une page web, utilisez la fonction htmlspecialchars().</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">$commentaire = "&lt;script&gt;alert('XSS')&lt;/script&gt;";
echo htmlspecialchars($commentaire, ENT_QUOTES, 'UTF-8');</code></pre></div></div></div></section><section id="_ent_quotes"><h2>ENT_QUOTES :</h2><div class="slide-content"><div class="paragraph"><p>Convertit à la fois les guillemets simples (') et doubles (") en entités HTML.</p></div></div></section><section id="_utf_8"><h2>UTF-8 :</h2><div class="slide-content"><div class="paragraph"><p>Spécifie l&#8217;encodage UTF-8, qui est recommandé pour les applications web.</p></div></div></section><section id="_9"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Cela transforme les balises &lt;script&gt; en entités HTML visibles au lieu de les exécuter, empêchant ainsi l&#8217;injection de JavaScript.</p></div></div></section><section id="_utiliser_strip_tags"><h2>Utiliser strip_tags()</h2><div class="slide-content"><div class="paragraph"><p>Si vous souhaitez permettre certains éléments HTML mais éliminer tous les autres, vous pouvez utiliser strip_tags() pour retirer les balises non souhaitées.</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">$description = "&lt;p&gt;Ceci est une &lt;strong&gt;description&lt;/strong&gt; avec du HTML.&lt;/p&gt;";
echo strip_tags($description, '&lt;p&gt;&lt;strong&gt;');  // Permet uniquement &lt;p&gt; et &lt;strong&gt;</code></pre></div></div></div></section><section id="_échapper_les_données_pour_les_urls"><h2>Échapper les données pour les URLs</h2><div class="slide-content"><div class="paragraph"><p>Lorsque vous utilisez des données dans des URLs (par exemple, dans les paramètres de requêtes), il est essentiel d&#8217;échapper ces données avec urlencode() ou rawurlencode() pour éviter des erreurs ou des injections.</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">$nom = "Jean Dupont";
$url = "https://example.com/recherche?nom=" . urlencode($nom);
echo $url;  // Affichera : https://example.com/recherche?nom=Jean+Dupont</code></pre></div></div></div></section></section>
<section><section id="_nettoyage_des_données"><h2>Nettoyage des données</h2><div class="slide-content"><div class="paragraph"><p>Le nettoyage des données consiste à retirer ou modifier des éléments de données indésirables ou dangereux avant de les traiter.</p></div></div></section><section id="_utilisation_de_filter_var_pour_nettoyer"><h2>Utilisation de filter_var() pour nettoyer</h2><div class="slide-content"><div class="paragraph"><p>filter_var() peut également être utilisé pour nettoyer les entrées en supprimant les caractères non désirés.</p></div></div></section><section id="_nettoyer_une_adresse_email"><h2>Nettoyer une adresse email :</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">$email = "   example@domain.com ";
$email_clean = filter_var($email, FILTER_SANITIZE_EMAIL);
echo $email_clean;  // "example@domain.com"</code></pre></div></div></div></section><section id="_nettoyer_une_url"><h2>Nettoyer une URL :</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">$url = "https://example.com/&lt;script&gt;alert('Boris is hacking you')&lt;/script&gt;";
$url_clean = filter_var($url, FILTER_SANITIZE_URL);
echo $url_clean;  // "https://example.com/alert('hack')"</code></pre></div></div></div></section></section>
<section><section id="_utilisation_des_librairies_et_frameworks_pour_la_validation_et_léchappement"><h2>Utilisation des librairies et frameworks pour la validation et l&#8217;échappement</h2><div class="slide-content"><div class="paragraph"><p>De nombreux frameworks PHP et bibliothèques tierces offrent des outils intégrés pour gérer les entrées utilisateurs de manière sécurisée, en validant et échappant automatiquement les données.</p></div></div></section><section id="_symfony_validator"><h2>Symfony Validator</h2><div class="slide-content"><div class="paragraph"><p>Si vous utilisez un framework comme Symfony, vous pouvez utiliser le composant Validator pour valider facilement les données.</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">use Symfony\Component\Validator\Validation;
use Symfony\Component\Validator\Constraints as Assert;

$validator = Validation::createValidator();
$violations = $validator-&gt;validate('example@domain.com', [
    new Assert\Email(),
    new Assert\NotBlank(),
]);

if (count($violations) &gt; 0) {
    echo "Email invalide.";
}</code></pre></div></div></div></section><section id="_laravel_validation"><h2>Laravel Validation</h2><div class="slide-content"><div class="paragraph"><p>Dans Laravel, la validation est simplifiée grâce à une API dédiée dans les contrôleurs.</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">$request-&gt;validate([
    'email' =&gt; 'required|email',
    'nom' =&gt; 'required|string|max:255',
]);</code></pre></div></div></div></section><section id="_prévention_des_attaques_courantes_xss_csrf_sql_injection_etc"><h2>Prévention des attaques courantes (XSS, CSRF, SQL Injection, etc.)</h2><div class="slide-content"><div class="paragraph"><p>La sécurité des applications web est un aspect crucial du développement, et certaines attaques sont très courantes, notamment les XSS (Cross-Site Scripting), CSRF (Cross-Site Request Forgery), et injections SQL.</p></div></div></section><section id="_10"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Il est essentiel de comprendre ces attaques et d&#8217;appliquer les bonnes pratiques pour les prévenir.</p></div></div></section></section>
<section><section id="_prévention_des_attaques_xss_cross_site_scripting"><h2>Prévention des attaques XSS (Cross-Site Scripting)</h2></section><section id="_quest_ce_quune_attaque_xss"><h2>Qu&#8217;est-ce qu&#8217;une attaque XSS ?</h2><div class="slide-content"><div class="paragraph"><p>L&#8217;attaque XSS permet à un attaquant d&#8217;injecter du code malveillant (souvent du JavaScript) dans une page web visitée par un utilisateur.</p></div></div></section><section id="_11"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Cela peut entraîner le vol de cookies, la modification de la page, ou l&#8217;exécution de scripts malveillants.</p></div></div></section><section id="_comment_prévenir_les_attaques_xss"><h2>Comment prévenir les attaques XSS</h2><div class="slide-content"><div class="paragraph"><p>Échapper les données avant de les afficher dans le HTML</p></div></div></section><section id="_12"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Utilisez htmlspecialchars() pour échapper les caractères spéciaux avant d&#8217;afficher des données utilisateur dans une page HTML.</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">$nom = "&lt;script&gt;alert('XSS')&lt;/script&gt;";
echo htmlspecialchars($nom, ENT_QUOTES, 'UTF-8');
// Affichera : &amp;lt;script&amp;gt;alert(&amp;#039;XSS&amp;#039;)&amp;lt;/script&amp;gt;</code></pre></div></div></div></section><section id="_ent_quotes_2"><h2>ENT_QUOTES :</h2><div class="slide-content"><div class="paragraph"><p>Convertit les guillemets simples et doubles en entités HTML.</p></div></div></section><section id="_utf_8_2"><h2>UTF-8 :</h2><div class="slide-content"><div class="paragraph"><p>Définit l&#8217;encodage pour éviter des erreurs d&#8217;encodage.</p></div></div></section><section id="_limiter_les_balises_autorisées"><h2>Limiter les balises autorisées</h2><div class="slide-content"><div class="paragraph"><p>Si vous permettez l&#8217;utilisation de certaines balises HTML (comme pour les commentaires), utilisez strip_tags() ou une bibliothèque spécialisée pour autoriser uniquement certaines balises.</p></div></div></section><section id="_13"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">$commentaire = "&lt;b&gt;Hello&lt;/b&gt; &lt;script&gt;alert('XSS')&lt;/script&gt;";
echo strip_tags($commentaire, '&lt;b&gt;&lt;i&gt;');
// Affichera : &lt;b&gt;Hello&lt;/b&gt;</code></pre></div></div></div></section><section id="_échapper_les_données_dans_les_attributs_html"><h2>Échapper les données dans les attributs HTML</h2><div class="slide-content"><div class="paragraph"><p>Lorsque vous utilisez des valeurs dynamiques dans des attributs HTML, assurez-vous d&#8217;échapper les caractères dangereux :</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">$nom = "Doe &lt;script&gt;alert('XSS')&lt;/script&gt;";
echo '&lt;input type="text" value="' . htmlspecialchars($nom, ENT_QUOTES, 'UTF-8') . '"&gt;';</code></pre></div></div></div></section><section id="_utiliser_des_content_security_policies_csp"><h2>Utiliser des Content Security Policies (CSP)</h2><div class="slide-content"><div class="paragraph"><p>Les Content Security Policies (CSP) permettent de limiter les sources de scripts dans votre page.</p></div></div></section><section id="_14"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Vous pouvez configurer des règles CSP dans les en-têtes HTTP.</p></div></div></section><section id="_15"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">header("Content-Security-Policy: default-src 'self'; script-src 'self';");</code></pre></div></div></div></section></section>
<section><section id="_prévention_des_attaques_csrf_cross_site_request_forgery"><h2>Prévention des attaques CSRF (Cross-Site Request Forgery)</h2></section><section id="_quest_ce_quune_attaque_csrf"><h2>Qu&#8217;est-ce qu&#8217;une attaque CSRF ?</h2><div class="slide-content"><div class="paragraph"><p>Le CSRF est une attaque où un utilisateur authentifié dans une application effectue une requête malveillante sans son consentement.</p></div></div></section><section id="_16"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Cela peut permettre à un attaquant de réaliser des actions au nom de l&#8217;utilisateur.</p></div></div></section></section>
<section><section id="_comment_prévenir_les_attaques_csrf"><h2>Comment prévenir les attaques CSRF</h2></section><section id="_utilisation_des_tokens_csrf"><h2>Utilisation des tokens CSRF</h2><div class="slide-content"><div class="paragraph"><p>Une méthode courante pour prévenir les attaques CSRF est d&#8217;utiliser des tokens CSRF.</p></div></div></section><section id="_17"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Ces tokens sont uniques et associés à la session de l&#8217;utilisateur. Ils doivent être inclus dans les formulaires et vérifiés côté serveur.</p></div></div></section></section>
<section id="_générer_un_token_csrf_lors_de_laffichage_du_formulaire"><h2>Générer un token CSRF lors de l&#8217;affichage du formulaire</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">&lt;?php
session_start();
if (empty($_SESSION['csrf_token'])) {
    $_SESSION['csrf_token'] = bin2hex(random_bytes(32));
}
?&gt;

&lt;form method="POST" action="traitement.php"&gt;
    &lt;input type="hidden" name="csrf_token" value="&lt;?php echo $_SESSION['csrf_token']; ?&gt;"&gt;
    &lt;!-- Autres champs du formulaire --&gt;
&lt;/form&gt;</code></pre></div></div></div></section>
<section><section id="_vérifier_le_token_csrf_lors_du_traitement_du_formulaire"><h2>Vérifier le token CSRF lors du traitement du formulaire</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">session_start();
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    if (!isset($_POST['csrf_token']) || $_POST['csrf_token'] !== $_SESSION['csrf_token']) {
        die("Invalid CSRF token");
    }
    // Traiter les données
}</code></pre></div></div></div></section><section id="_utiliser_des_en_têtes_personnalisés_pour_les_requêtes_ajax"><h2>Utiliser des en-têtes personnalisés pour les requêtes AJAX</h2><div class="slide-content"><div class="paragraph"><p>Pour les requêtes AJAX, vous pouvez inclure un token CSRF dans un en-tête personnalisé et vérifier cet en-tête côté serveur.</p></div></div></section><section id="_exemple_avec_jquery"><h2>Exemple avec jQuery :</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-javascript hljs" data-noescape="true" data-lang="javascript">$.ajax({
    type: 'POST',
    url: '/action',
    data: { info: "données" },
    headers: { 'X-CSRF-Token': '&lt;?php echo $_SESSION['csrf_token']; ?&gt;' },
    success: function(data) {
        console.log("Requête réussie");
    }
});</code></pre></div></div></div></section><section id="_vérification_côté_serveur"><h2>Vérification côté serveur :</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $csrfToken = $_SERVER['HTTP_X_CSRF_TOKEN'] ?? '';
    if ($csrfToken !== $_SESSION['csrf_token']) {
        die("Invalid CSRF token");
    }
}</code></pre></div></div></div></section></section>
<section><section id="_prévention_des_injections_sql_sql_injection"><h2>Prévention des injections SQL (SQL Injection)</h2></section><section id="_quest_ce_quune_injection_sql"><h2>Qu&#8217;est-ce qu&#8217;une injection SQL ?</h2><div class="slide-content"><div class="paragraph"><p>Une injection SQL se produit lorsqu&#8217;un attaquant insère du code SQL dans une requête mal conçue.</p></div></div></section><section id="_18"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Cela peut permettre de lire, modifier ou supprimer des données de la base de données.</p></div></div></section><section id="_comment_prévenir_les_injections_sql"><h2>Comment prévenir les injections SQL</h2></section><section id="_utilisation_de_requêtes_préparées_avec_pdo"><h2>Utilisation de requêtes préparées avec PDO</h2><div class="slide-content"><div class="paragraph"><p>La méthode la plus efficace pour prévenir les injections SQL est d&#8217;utiliser des requêtes préparées. PDO offre une gestion automatique de l&#8217;échappement des données.</p></div></div></section><section id="_exemple_avec_pdo"><h2>Exemple avec PDO :</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">$pdo = new PDO('mysql:host=localhost;dbname=test', 'root', '');

// Requête préparée
$query = $pdo-&gt;prepare("SELECT * FROM utilisateurs WHERE email = :email");
$query-&gt;execute(['email' =&gt; $_POST['email']]);
$utilisateur = $query-&gt;fetch();</code></pre></div></div></div></section><section id="_éviter_de_construire_des_requêtes_sql_manuellement"><h2>Éviter de construire des requêtes SQL manuellement</h2><div class="slide-content"><div class="paragraph"><p>Ne jamais construire des requêtes SQL en concaténant directement des variables PHP.</p></div></div></section><section id="_mauvaise_pratique"><h2>Mauvaise pratique :</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">// Vulnérable aux injections SQL
$query = "SELECT * FROM utilisateurs WHERE email = '" . $_POST['email'] . "'";</code></pre></div></div></div></section><section id="_utiliser_des_orm_object_relational_mapping"><h2>Utiliser des ORM (Object-Relational Mapping)</h2><div class="slide-content"><div class="paragraph"><p>Les ORM comme Eloquent (Laravel) ou Doctrine (Symfony) facilitent la manipulation des bases de données tout en protégeant contre les injections SQL.</p></div></div></section><section id="_exemple_avec_eloquent"><h2>Exemple avec Eloquent :</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">// Récupérer un utilisateur en toute sécurité
$utilisateur = Utilisateur::where('email', $_POST['email'])-&gt;first();</code></pre></div></div></div></section></section>
<section><section id="_autres_bonnes_pratiques_de_sécurité"><h2>Autres bonnes pratiques de sécurité</h2></section><section id="_validation_et_nettoyage_des_données"><h2>Validation et nettoyage des données</h2><div class="slide-content"><div class="paragraph"><p>Valider toutes les données reçues d&#8217;un utilisateur pour s&#8217;assurer qu&#8217;elles respectent le format attendu.</p></div></div></section><section id="_19"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Utilisez des fonctions comme filter_var() pour valider et nettoyer les données.</p></div></div></section><section id="_exemple_de_validation_demail_avec_filter_var"><h2>Exemple de validation d&#8217;email avec filter_var() :</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">$email = $_POST['email'];
if (filter_var($email, FILTER_VALIDATE_EMAIL)) {
    echo "Email valide.";
} else {
    echo "Email invalide.";
}</code></pre></div></div></div></section><section id="_limitation_de_la_taille_des_entrées"><h2>Limitation de la taille des entrées</h2><div class="slide-content"><div class="paragraph"><p>Imposez une limite sur la longueur des données que les utilisateurs peuvent soumettre pour prévenir les attaques par déni de service (DoS).</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">if (strlen($_POST['nom']) &gt; 255) {
    die("Nom trop long");
}</code></pre></div></div></div></section><section id="_utilisation_des_en_têtes_http_de_sécurité"><h2>Utilisation des en-têtes HTTP de sécurité</h2><div class="slide-content"><div class="paragraph"><p>Les en-têtes HTTP permettent de protéger les applications contre certaines attaques, notamment XSS et le clickjacking.</p></div></div></section><section id="_quelques_exemples_den_têtes_de_sécurité"><h2>Quelques exemples d&#8217;en-têtes de sécurité :</h2></section><section id="_x_content_type_options_nosniff"><h2>X-Content-Type-Options: nosniff :</h2><div class="slide-content"><div class="paragraph"><p>Empêche l&#8217;interprétation erronée des types de contenu.</p></div></div></section><section id="_x_frame_options_deny"><h2>X-Frame-Options: DENY :</h2><div class="slide-content"><div class="paragraph"><p>Empêche le chargement de votre site dans une iframe, protégeant ainsi contre les attaques de clickjacking.</p></div></div></section><section id="_strict_transport_security"><h2>Strict-Transport-Security :</h2><div class="slide-content"><div class="paragraph"><p>Force l&#8217;utilisation de HTTPS.</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">header("X-Frame-Options: DENY");
header("X-Content-Type-Options: nosniff");
header("Strict-Transport-Security: max-age=31536000; includeSubDomains");</code></pre></div></div></div></section><section id="_bonnes_pratiques_pour_gérer_lauthentification_et_les_sessions"><h2>Bonnes pratiques pour gérer l’authentification et les sessions</h2><div class="slide-content"><div class="paragraph"><p>La gestion sécurisée de l&#8217;authentification et des sessions est essentielle pour protéger une application web PHP contre les accès non autorisés et les attaques malveillantes.</p></div></div></section><section id="_20"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Les bonnes pratiques en la matière permettent non seulement de sécuriser les données des utilisateurs, mais aussi d&#8217;assurer la fiabilité et la réputation de votre application.</p></div></div></section></section>
<section><section id="_gestion_sécurisée_des_mots_de_passe"><h2>Gestion sécurisée des mots de passe</h2></section><section id="_utiliser_le_hachage_sécurisé_des_mots_de_passe"><h2>Utiliser le hachage sécurisé des mots de passe</h2><div class="slide-content"><div class="paragraph"><p>Il est crucial de ne jamais stocker les mots de passe en clair dans votre base de données.</p></div></div></section><section id="_21"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Au lieu de cela, utilisez des fonctions de hachage sécurisées pour stocker une version hachée du mot de passe.</p></div></div></section><section id="_utiliser_password_hash_et_password_verify"><h2>Utiliser password_hash() et password_verify()</h2><div class="slide-content"><div class="paragraph"><p>PHP fournit des fonctions intégrées pour le hachage sécurisé des mots de passe :</p></div></div></section><section id="_password_hash"><h2>password_hash() :</h2><div class="slide-content"><div class="paragraph"><p>Pour hacher le mot de passe avant de le stocker.</p></div></div></section><section id="_password_verify"><h2>password_verify() :</h2><div class="slide-content"><div class="paragraph"><p>Pour vérifier un mot de passe saisi par rapport au hachage stocké.</p></div></div></section><section id="_exemple"><h2>Exemple :</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">// Lors de la création d'un nouvel utilisateur ou du changement de mot de passe
$motDePasse = $_POST['mot_de_passe'];
$motDePasseHache = password_hash($motDePasse, PASSWORD_DEFAULT);
// Stocker $motDePasseHache dans la base de données</code></pre></div></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">// Lors de la connexion de l'utilisateur
$motDePasseSaisi = $_POST['mot_de_passe'];
$motDePasseHache = /* Récupérer le hachage depuis la base de données pour cet utilisateur */;

if (password_verify($motDePasseSaisi, $motDePasseHache)) {
    // Authentification réussie
} else {
    // Échec de l'authentification
}</code></pre></div></div></div></section><section id="_remarque"><h2>Remarque :</h2><div class="slide-content"><div class="paragraph"><p>PASSWORD_DEFAULT utilise l&#8217;algorithme de hachage le plus fort disponible (actuellement bcrypt), et sera mis à jour avec de meilleurs algorithmes à l&#8217;avenir.</p></div></div></section></section>
<section><section id="_utiliser_un_sel_salt_pour_le_hachage"><h2>Utiliser un sel (salt) pour le hachage</h2><div class="slide-content"><div class="paragraph"><p>Lorsque vous utilisez password_hash(), un sel sécurisé est automatiquement généré et stocké avec le hachage.</p></div></div></section><section id="_22"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Cela protège contre les attaques par dictionnaire et par tables rainbow.</p></div></div></section></section>
<section><section id="_politique_de_mot_de_passe_robuste"><h2>Politique de mot de passe robuste</h2></section><section id="_exiger_des_mots_de_passe_forts"><h2>Exiger des mots de passe forts :</h2><div class="slide-content"><div class="paragraph"><p>Longueur minimale (par exemple, 8 caractères), inclusion de lettres majuscules, minuscules, chiffres et caractères spéciaux.</p></div></div></section><section id="_limiter_les_tentatives_de_connexion"><h2>Limiter les tentatives de connexion :</h2><div class="slide-content"><div class="paragraph"><p>Pour empêcher les attaques par force brute, bloquez le compte ou ralentissez les tentatives après plusieurs échecs consécutifs.</p></div></div></section><section id="_ne_pas_imposer_de_règles_trop_complexes"><h2>Ne pas imposer de règles trop complexes :</h2><div class="slide-content"><div class="paragraph"><p>Des règles trop strictes peuvent inciter les utilisateurs à adopter des comportements risqués (comme noter leur mot de passe).</p></div></div></section></section>
<section id="_utiliser_https"><h2>Utiliser HTTPS</h2><div class="slide-content"><div class="paragraph"><p>Assurez-vous que les informations d&#8217;identification (nom d&#8217;utilisateur et mot de passe) sont toujours transmises via une connexion sécurisée HTTPS pour empêcher l&#8217;interception des données.</p></div></div></section>
<section><section id="_gestion_sécurisée_des_sessions"><h2>Gestion sécurisée des sessions</h2></section><section id="_démarrer_la_session_de_manière_sécurisée"><h2>Démarrer la session de manière sécurisée</h2><div class="slide-content"><div class="paragraph"><p>Utilisez session_start() au début de votre script pour démarrer une session.</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">session_start();</code></pre></div></div></div></section><section id="_configurer_les_paramètres_de_session"><h2>Configurer les paramètres de session</h2><div class="slide-content"><div class="paragraph"><p>Avant de démarrer la session, configurez les paramètres pour renforcer la sécurité.</p></div></div></section><section id="_utiliser_des_cookies_sécurisés"><h2>Utiliser des cookies sécurisés</h2></section><section id="_session_cookie_secure"><h2>session.cookie_secure :</h2><div class="slide-content"><div class="paragraph"><p>Force l&#8217;utilisation des cookies uniquement sur les connexions sécurisées HTTPS.</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">ini_set('session.cookie_secure', '1');</code></pre></div></div></div></section><section id="_session_cookie_httponly"><h2>session.cookie_httponly :</h2><div class="slide-content"><div class="paragraph"><p>Empêche l&#8217;accès aux cookies de session via JavaScript, réduisant le risque d&#8217;attaques XSS.</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">ini_set('session.cookie_httponly', '1');</code></pre></div></div></div></section><section id="_session_cookie_samesite"><h2>session.cookie_samesite :</h2><div class="slide-content"><div class="paragraph"><p>Empêche l&#8217;envoi des cookies de session lors des requêtes cross-site (protection contre les attaques CSRF).</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">ini_set('session.cookie_samesite', 'Strict');</code></pre></div></div></div></section><section id="_régénérer_lid_de_session_après_connexion"><h2>Régénérer l&#8217;ID de session après connexion</h2><div class="slide-content"><div class="paragraph"><p>Pour prévenir les attaques par fixation de session, régénérez l&#8217;ID de session après une authentification réussie.</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">// Après vérification des identifiants de l'utilisateur
session_regenerate_id(true);
$_SESSION['utilisateur_id'] = $utilisateur['id'];</code></pre></div></div></div></section><section id="_session_regenerate_idtrue"><h2>session_regenerate_id(true) :</h2><div class="slide-content"><div class="paragraph"><p>Crée un nouvel ID de session et supprime l&#8217;ancien de l&#8217;espace de stockage.</p></div></div></section><section id="_limiter_la_durée_de_vie_des_sessions"><h2>Limiter la durée de vie des sessions</h2></section><section id="_définir_une_durée_de_vie_pour_les_sessions"><h2>Définir une durée de vie pour les sessions</h2><div class="slide-content"><div class="paragraph"><p>Fixez une durée de vie maximale pour les sessions afin de réduire la fenêtre d&#8217;opportunité pour un attaquant.</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">ini_set('session.gc_maxlifetime', 1800); // 1800 secondes = 30 minutes</code></pre></div></div></div></section><section id="_implémenter_un_délai_dinactivité"><h2>Implémenter un délai d&#8217;inactivité</h2><div class="slide-content"><div class="paragraph"><p>Stockez le timestamp de la dernière activité de l&#8217;utilisateur et déconnectez-le après une période d&#8217;inactivité.</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">session_start();

$tempsInactifMax = 600; // 600 secondes = 10 minutes

if (isset($_SESSION['dernier_acces'])) {
    $tempsEcoule = time() - $_SESSION['dernier_acces'];
    if ($tempsEcoule &gt; $tempsInactifMax) {
        session_unset();
        session_destroy();
        header("Location: login.php?message=Session expirée");
        exit();
    }
}

$_SESSION['dernier_acces'] = time();</code></pre></div></div></div></section><section id="_stocker_les_informations_minimales_dans_la_session"><h2>Stocker les informations minimales dans la session</h2><div class="slide-content"><div class="paragraph"><p>Ne stockez que les informations essentielles dans la session.</p></div></div></section><section id="_23"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Évitez de stocker des informations sensibles comme les mots de passe ou les données personnelles non nécessaires.</p></div></div></section></section>
<section><section id="_protection_contre_les_attaques_courantes"><h2>Protection contre les attaques courantes</h2></section><section id="_protection_contre_les_attaques_csrf"><h2>Protection contre les attaques CSRF</h2><div class="slide-content"><div class="paragraph"><p>Implémentez des tokens CSRF dans vos formulaires pour vous assurer que les requêtes proviennent bien de l&#8217;utilisateur authentifié.</p></div></div></section><section id="_générer_et_stocker_le_token_csrf"><h2>Générer et stocker le token CSRF</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">session_start();

if (empty($_SESSION['csrf_token'])) {
    $_SESSION['csrf_token'] = bin2hex(random_bytes(32));
}</code></pre></div></div></div></section><section id="_inclure_le_token_csrf_dans_les_formulaires"><h2>Inclure le token CSRF dans les formulaires</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">&lt;form method="POST" action="traitement.php"&gt;
    &lt;input type="hidden" name="csrf_token" value="&lt;?php echo $_SESSION['csrf_token']; ?&gt;"&gt;
    &lt;!-- Autres champs du formulaire --&gt;
    &lt;button type="submit"&gt;Envoyer&lt;/button&gt;
&lt;/form&gt;</code></pre></div></div></div></section></section>
<section><section id="_vérifier_le_token_csrf_lors_du_traitement"><h2>Vérifier le token CSRF lors du traitement</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">session_start();

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    if (!isset($_POST['csrf_token']) || $_POST['csrf_token'] !== $_SESSION['csrf_token']) {
        die("Token CSRF invalide");
    }
    // Traiter les données du formulaire
}</code></pre></div></div></div></section><section id="_protection_contre_les_attaques_xss"><h2>Protection contre les attaques XSS</h2><div class="slide-content"><div class="paragraph"><p>Lors de l&#8217;affichage des données utilisateur, utilisez htmlspecialchars() pour échapper les caractères spéciaux.</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">echo htmlspecialchars($donneeUtilisateur, ENT_QUOTES, 'UTF-8');</code></pre></div></div></div></section><section id="_protection_contre_les_attaques_par_injection"><h2>Protection contre les attaques par injection</h2><div class="slide-content"><div class="paragraph"><p>Utilisez des requêtes préparées pour toutes les interactions avec la base de données afin de prévenir les injections SQL.</p></div></div></section></section>
<section><section id="_bonnes_pratiques_supplémentaires"><h2>Bonnes pratiques supplémentaires</h2></section><section id="_ne_pas_exposer_les_informations_sensibles"><h2>Ne pas exposer les informations sensibles</h2><div class="slide-content"><div class="paragraph"><p>Ne pas divulguer les messages d&#8217;erreur détaillés : En cas d&#8217;erreur d&#8217;authentification, utilisez des messages génériques.</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">// Éviter les messages comme "Mot de passe incorrect" ou "Utilisateur inexistant"
echo "Identifiants invalides.";</code></pre></div></div></div></section><section id="_gestion_sécurisée_de_la_déconnexion"><h2>Gestion sécurisée de la déconnexion</h2><div class="slide-content"><div class="paragraph"><p>Assurez-vous que la déconnexion détruit correctement la session.</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">session_start();
session_unset();
session_destroy();
setcookie(session_name(), '', time() - 3600, '/');
header("Location: login.php");
exit();</code></pre></div></div></div></section><section id="_limiter_le_nombre_de_tentatives_de_connexion"><h2>Limiter le nombre de tentatives de connexion</h2><div class="slide-content"><div class="paragraph"><p>Pour prévenir les attaques par force brute, limitez le nombre de tentatives de connexion autorisées.</p></div></div></section><section id="_exemple_2"><h2>Exemple :</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">session_start();

if (!isset($_SESSION['tentatives'])) {
    $_SESSION['tentatives'] = 0;
}

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    if ($_SESSION['tentatives'] &gt;= 5) {
        die("Trop de tentatives. Veuillez réessayer plus tard.");
    }

    // Vérifier les identifiants
    $authentifie = verifier_identifiants($_POST['email'], $_POST['mot_de_passe']);

    if ($authentifie) {
        $_SESSION['tentatives'] = 0; // Réinitialiser le compteur
        // Continuer le processus d'authentification
    } else {
        $_SESSION['tentatives']++;
        echo "Identifiants invalides.";
    }
}</code></pre></div></div></div></section></section>
<section><section id="_utiliser_des_bibliothèques_et_frameworks_éprouvés"><h2>Utiliser des bibliothèques et frameworks éprouvés</h2><div class="slide-content"><div class="paragraph"><p>Les frameworks PHP modernes comme Laravel ou Symfony intègrent des mécanismes de sécurité pour l&#8217;authentification et la gestion des sessions.</p></div></div></section><section id="_24"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Utiliser ces outils peut vous aider à éviter les erreurs communes.</p></div></div></section><section id="_exemple_avec_laravel_auth"><h2>Exemple avec Laravel Auth</h2><div class="slide-content"><div class="paragraph"><p>Laravel fournit un système d&#8217;authentification prêt à l&#8217;emploi :</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-noescape="true" data-lang="bash">php artisan make:auth</code></pre></div></div></div></section><section id="_25"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Cette commande génère les contrôleurs, vues et routes nécessaires pour l&#8217;authentification, avec les bonnes pratiques de sécurité intégrées.</p></div></div></section><section id="_26"><h2>&#8230;&#8203;</h2></section></section>
<section><section id="_mise_en_place_de_https_et_gestion_des_cookies"><h2>Mise en place de HTTPS et gestion des cookies</h2></section><section id="_forcer_lutilisation_de_https"><h2>Forcer l&#8217;utilisation de HTTPS</h2><div class="slide-content"><div class="paragraph"><p>Le protocole HTTPS chiffre les données échangées entre le client et le serveur, protégeant ainsi les informations sensibles.</p></div></div></section><section id="_27"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Configurer le serveur web pour rediriger toutes les requêtes HTTP vers HTTPS.
Obtenir un certificat SSL valide (par exemple, via Let&#8217;s Encrypt).</p></div></div></section><section id="_configurer_les_cookies_de_session"><h2>Configurer les cookies de session</h2><div class="slide-content"><div class="paragraph"><p>Assurez-vous que les cookies de session sont sécurisés.</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">ini_set('session.cookie_secure', '1'); // Le cookie n'est envoyé que sur une connexion sécurisée
ini_set('session.cookie_httponly', '1'); // Le cookie n'est pas accessible via JavaScript
ini_set('session.cookie_samesite', 'Strict'); // Le cookie n'est pas envoyé avec les requêtes cross-site</code></pre></div></div></div></section></section>
<section><section id="_surveillance_et_journalisation"><h2>Surveillance et journalisation</h2></section><section id="_enregistrer_les_tentatives_de_connexion"><h2>Enregistrer les tentatives de connexion</h2><div class="slide-content"><div class="paragraph"><p>Conservez des logs des tentatives de connexion réussies et échouées pour détecter des activités suspectes.</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">function journaliserTentative($email, $reussie) {
    $fichierLog = 'log_connexions.txt';
    $date = date('Y-m-d H:i:s');
    $statut = $reussie ? 'réussie' : 'échouée';
    $ligne = "$date - Tentative de connexion $statut pour l'email : $email\n";
    file_put_contents($fichierLog, $ligne, FILE_APPEND);
}</code></pre></div></div></div></section></section>
<section id="_surveiller_les_anomalies"><h2>Surveiller les anomalies</h2><div class="slide-content"><div class="paragraph"><p>Mettez en place des alertes pour détecter des activités inhabituelles, comme un grand nombre de tentatives échouées ou des connexions depuis des emplacements géographiques inattendus.</p></div></div></section>
<section id="_mise_à_jour_régulière_et_bonnes_pratiques_de_développement"><h2>Mise à jour régulière et bonnes pratiques de développement</h2></section>
<section><section id="_maintenir_le_code_à_jour"><h2>Maintenir le code à jour</h2></section><section id="_mises_à_jour_de_php"><h2>Mises à jour de PHP :</h2><div class="slide-content"><div class="paragraph"><p>Utilisez une version supportée de PHP pour bénéficier des dernières améliorations de sécurité.</p></div></div></section><section id="_mises_à_jour_des_bibliothèques"><h2>Mises à jour des bibliothèques :</h2><div class="slide-content"><div class="paragraph"><p>Maintenez à jour les dépendances et les bibliothèques tierces.</p></div></div></section></section>
<section><section id="_suivre_les_principes_du_développement_sécurisé"><h2>Suivre les principes du développement sécurisé</h2></section><section id="_principe_du_moindre_privilège"><h2>Principe du moindre privilège :</h2><div class="slide-content"><div class="paragraph"><p>Donnez uniquement les droits nécessaires aux utilisateurs et aux processus.</p></div></div></section><section id="_éviter_le_code_redondant"><h2>Éviter le code redondant :</h2><div class="slide-content"><div class="paragraph"><p>Centralisez la gestion de l&#8217;authentification et des sessions pour éviter les incohérences.</p></div></div></section><section id="_revue_de_code"><h2>Revue de code :</h2><div class="slide-content"><div class="paragraph"><p>Faites vérifier votre code par d&#8217;autres développeurs pour détecter les vulnérabilités potentielles.</p></div></div></section><section id="_utilisation_de_php_security_libraries_paragonie_etc"><h2>Utilisation de PHP Security Libraries (Paragonie, etc.)</h2><div class="slide-content"><div class="paragraph"><p>Les bibliothèques de sécurité PHP telles que Paragonie Security offrent des solutions pratiques et robustes pour renforcer la sécurité des applications PHP.</p></div></div></section><section id="_28"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Ces bibliothèques sont spécialement conçues pour aider les développeurs à implémenter des fonctionnalités de sécurité telles que:</p></div>
<div class="ulist"><ul><li class="fragment"><p>le hachage des mots de passe,</p></li><li class="fragment"><p>le chiffrement sécurisé,</p></li><li class="fragment"><p>la génération de tokens et bien d&#8217;autres, tout en respectant les bonnes pratiques modernes.</p></li></ul></div></div></section></section>
<section id="_principales_bibliothèques_de_sécurité_php"><h2>Principales bibliothèques de sécurité PHP</h2></section>
<section><section id="_paragonie_security_libraries"><h2>Paragonie Security Libraries</h2><div class="slide-content"><div class="paragraph"><p>Paragon Initiative Enterprises est une organisation reconnue pour ses contributions à la sécurité PHP.</p></div></div></section><section id="_29"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Ils maintiennent plusieurs bibliothèques largement utilisées dans l&#8217;écosystème PHP, notamment libsodium, random_compat, password_compat et Halite.</p></div></div></section></section>
<section><section id="_sodium_libsodium"><h2>Sodium (libsodium)</h2><div class="slide-content"><div class="paragraph"><p>Sodium est une bibliothèque cryptographique moderne et sécurisée, incluse nativement dans PHP depuis la version 7.2 sous le nom libsodium.</p></div></div></section><section id="_30"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Elle permet de réaliser des opérations cryptographiques telles que le chiffrement, le déchiffrement, la signature et la génération de clés.</p></div></div></section><section id="_exemple_chiffrement_et_déchiffrement_avec_sodium"><h2>Exemple : Chiffrement et déchiffrement avec Sodium</h2></section><section id="_chiffrement_dun_message"><h2>Chiffrement d&#8217;un message :</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">// Clé secrète pour le chiffrement (32 octets générés aléatoirement)
$cleSecrete = sodium_crypto_secretbox_keygen();

// Message à chiffrer
$message = "Message sensible";

// Nonce (doit être unique pour chaque message)
$nonce = random_bytes(SODIUM_CRYPTO_SECRETBOX_NONCEBYTES);

// Chiffrement du message
$messageChiffre = sodium_crypto_secretbox($message, $nonce, $cleSecrete);

echo bin2hex($messageChiffre);</code></pre></div></div></div></section><section id="_déchiffrement_dun_message"><h2>Déchiffrement d&#8217;un message :</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">// Nonce et clé doivent être les mêmes que ceux utilisés pour chiffrer
$messageDechiffre = sodium_crypto_secretbox_open($messageChiffre, $nonce, $cleSecrete);

if ($messageDechiffre === false) {
    echo "Erreur : échec du déchiffrement.";
} else {
    echo $messageDechiffre;
}</code></pre></div></div></div></section></section>
<section><section id="_avantages_de_sodium"><h2>Avantages de Sodium :</h2></section><section id="_simplicité_dutilisation"><h2>Simplicité d&#8217;utilisation :</h2><div class="slide-content"><div class="paragraph"><p>L&#8217;API est conçue pour être simple à utiliser et difficile à mal utiliser.</p></div></div></section><section id="_sécurité_moderne"><h2>Sécurité moderne :</h2><div class="slide-content"><div class="paragraph"><p>Sodium utilise des algorithmes cryptographiques de pointe comme ChaCha20 pour le chiffrement et Poly1305 pour l&#8217;authentification des messages.</p></div></div></section><section id="_31"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Inclus nativement dans PHP depuis 7.2, ce qui évite l&#8217;installation de dépendances externes.</p></div></div></section></section>
<section><section id="_password_compat"><h2>Password_compat</h2><div class="slide-content"><div class="paragraph"><p>La bibliothèque password_compat est utilisée pour apporter la fonctionnalité de hachage sécurisé des mots de passe aux versions de PHP antérieures à 5.5.</p></div></div></section><section id="_32"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Elle a été largement intégrée à PHP avec les fonctions password_hash() et password_verify(), permettant de gérer le hachage et la vérification des mots de passe en utilisant des algorithmes sécurisés comme bcrypt.</p></div></div></section><section id="_exemple_avec_password_hash_et_password_verify"><h2>Exemple avec password_hash() et password_verify() :</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">// Hachage d'un mot de passe
$motDePasse = "monMotDePasse123";
$hash = password_hash($motDePasse, PASSWORD_DEFAULT);

// Vérification d'un mot de passe
if (password_verify($motDePasse, $hash)) {
    echo "Mot de passe correct";
} else {
    echo "Mot de passe incorrect";
}</code></pre></div></div>
<div class="paragraph"><p>PASSWORD_DEFAULT utilise le meilleur algorithme disponible (bcrypt ou autre).</p></div></div></section><section id="_33"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>L&#8217;algorithme utilisé par password_hash() est évolutif : si un meilleur algorithme est introduit, le code continuera de fonctionner sans modification.</p></div></div></section></section>
<section><section id="_random_compat"><h2>Random_compat</h2><div class="slide-content"><div class="paragraph"><p>La bibliothèque random_compat permet d&#8217;utiliser les fonctions random_bytes() et random_int() sur des versions de PHP antérieures à 7.</p></div></div></section><section id="_34"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>La génération de nombres aléatoires est cruciale pour de nombreuses opérations de sécurité comme la création de tokens CSRF ou des clés de chiffrement.</p></div></div></section></section>
<section><section id="_utilisation_de_random_bytes_et_random_int"><h2>Utilisation de random_bytes() et random_int() :</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">// Générer 32 octets de données aléatoires pour une clé ou un token
$cle = random_bytes(32);
echo bin2hex($cle);  // Convertit en hexadécimal pour l'affichage

// Générer un entier aléatoire sécurisé entre 1 et 100
$nombreAleatoire = random_int(1, 100);
echo $nombreAleatoire;</code></pre></div></div></div></section><section id="_random_bytes"><h2>random_bytes() :</h2><div class="slide-content"><div class="paragraph"><p>Utilisé pour générer des octets aléatoires sécurisés (cryptographiquement sûrs).</p></div></div></section><section id="_random_int"><h2>random_int() :</h2><div class="slide-content"><div class="paragraph"><p>Utilisé pour générer des nombres entiers sécurisés.</p></div></div></section><section id="_avantages_de_random_compat"><h2>Avantages de Random_compat :</h2><div class="slide-content"><div class="paragraph"><p>Apporte une génération aléatoire sécurisée aux versions de PHP &lt; 7.</p></div></div></section><section id="_35"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Utilise des sources d&#8217;entropie fiables pour garantir la sécurité cryptographique.</p></div></div></section></section>
<section><section id="_halite"><h2>Halite</h2><div class="slide-content"><div class="paragraph"><p>Halite est une abstraction de haut niveau au-dessus de Sodium, offrant une API plus simple pour effectuer des opérations courantes de sécurité, telles que:</p></div><div class="ulist"><ul><li class="fragment"><p>le chiffrement,</p></li><li class="fragment"><p>la signature</p></li><li class="fragment"><p>la génération de clés.</p></li></ul></div></div></section><section id="_36"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Elle est plus facile à utiliser pour les développeurs qui ne sont pas familiers avec la cryptographie.</p></div></div></section><section id="_exemple_avec_halite_chiffrement_symétrique"><h2>Exemple avec Halite (chiffrement symétrique)</h2></section><section id="_installation_de_halite_via_composer"><h2>Installation de Halite via Composer :</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-noescape="true" data-lang="bash">composer require paragonie/halite</code></pre></div></div></div></section><section id="_chiffrement_avec_halite"><h2>Chiffrement avec Halite :</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">use ParagonIE\Halite\KeyFactory;
use ParagonIE\Halite\Symmetric\Crypto;

// Générer une clé symétrique
$cle = KeyFactory::generateEncryptionKey();
KeyFactory::save($cle, '/chemin/vers/cle');

// Chiffrement d'un message
$cle = KeyFactory::loadEncryptionKey('/chemin/vers/cle');
$message = "Données sensibles à chiffrer";
$messageChiffre = Crypto::encrypt($message, $cle);</code></pre></div></div></div></section><section id="_déchiffrement_avec_halite"><h2>Déchiffrement avec Halite :</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">$messageDechiffre = Crypto::decrypt($messageChiffre, $cle);</code></pre></div></div></div></section></section>
<section id="_autres_bibliothèques_de_sécurité_populaires"><h2>Autres bibliothèques de sécurité populaires</h2></section>
<section><section id="_php_security_by_enygma"><h2>PHP Security (by Enygma)</h2><div class="slide-content"><div class="paragraph"><p>La bibliothèque PHP Security offre plusieurs fonctions utiles pour améliorer la sécurité des applications PHP.</p></div></div></section><section id="_37"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Elle inclut des fonctionnalités telles que :</p></div></div></section><section id="_nettoyage_des_données_utilisateur"><h2>Nettoyage des données utilisateur :</h2><div class="slide-content"><div class="paragraph"><p>Sanitize les entrées utilisateurs pour les protéger contre les injections.</p></div></div></section><section id="_évasion_des_sorties_html"><h2>Évasion des sorties HTML :</h2><div class="slide-content"><div class="paragraph"><p>Prévention des attaques XSS.</p></div></div></section><section id="_exemple_3"><h2>Exemple :</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">use PHP\Security\Security;

$securite = new Security();

// Nettoyage d'une entrée utilisateur (prévention des injections)
$entreeNettoyee = $securite-&gt;sanitize($_POST['donnee']);

// Échappement pour une sortie HTML
$sortieSecurisee = $securite-&gt;escape($_POST['donnee']);</code></pre></div></div></div></section><section id="_defuse_php_encryption"><h2>Defuse PHP Encryption</h2><div class="slide-content"><div class="paragraph"><p>Defuse PHP Encryption est une bibliothèque de chiffrement simple et sécurisée. Elle est conçue pour être facile à utiliser, tout en fournissant une sécurité forte.</p></div></div></section><section id="_installation_de_defuse_php_encryption_via_composer"><h2>Installation de Defuse PHP Encryption via Composer :</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-noescape="true" data-lang="bash">composer require defuse/php-encryption</code></pre></div></div></div></section><section id="_exemple_4"><h2>Exemple :</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-php hljs" data-noescape="true" data-lang="php">use Defuse\Crypto\Crypto;
use Defuse\Crypto\Key;

// Générer une clé de chiffrement
$cle = Key::createNewRandomKey();
$cleHex = $cle-&gt;saveToAsciiSafeString();

// Chiffrer un message
$texte = "Données sensibles";
$messageChiffre = Crypto::encrypt($texte, $cle);

// Déchiffrer un message
$messageDechiffre = Crypto::decrypt($messageChiffre, $cle);</code></pre></div></div></div></section><section id="_avantages"><h2>Avantages :</h2></section><section id="_facilité_dutilisation"><h2>Facilité d&#8217;utilisation :</h2><div class="slide-content"><div class="paragraph"><p>L&#8217;API est conçue pour éviter les erreurs courantes.</p></div></div></section><section id="_sécurité_moderne_2"><h2>Sécurité moderne :</h2><div class="slide-content"><div class="paragraph"><p>Utilise des algorithmes de chiffrement modernes et sécurisés.</p></div></div></section></section>
<section><section id="_html_purifier"><h2>HTML Purifier</h2><div class="slide-content"><div class="paragraph"><p>HTML Purifier est une bibliothèque qui nettoie et valide les entrées HTML.</p></div></div></section><section id="_38"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Elle permet de s&#8217;assurer que le HTML fourni par les utilisateurs est conforme aux standards et exempt de code malveillant.</p></div></div></section><section id="_installation"><h2>Installation :</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-noescape="true" data-lang="bash">composer require ezyang/htmlpurifier</code></pre></div></div></div></section><section id="_utilisation"><h2>Utilisation :</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre>require_once 'path/to/HTMLPurifier.auto.php';
$config = HTMLPurifier_Config::createDefault();
$purificateur = new HTMLPurifier($config);

$codeHTML = '&lt;script&gt;alert("XSS")&lt;/script&gt;&lt;p&gt;Texte propre&lt;/p&gt;';
$codePropre = $purificateur-&gt;purify($codeHTML);

echo $codePropre;  // Affichera uniquement &lt;p&gt;Texte propre&lt;/p&gt;</pre></div></div></div></section></section>
<section><section id="_pourquoi_utiliser_des_bibliothèques_de_sécurité"><h2>Pourquoi utiliser des bibliothèques de sécurité ?</h2></section><section id="_facilité_dutilisation_et_sécurité_accrue"><h2>Facilité d&#8217;utilisation et sécurité accrue</h2><div class="slide-content"><div class="paragraph"><p>Ces bibliothèques sont conçues pour être faciles à utiliser et à intégrer.</p></div></div></section><section id="_39"><h2>&#8230;&#8203;</h2><div class="slide-content"><div class="paragraph"><p>Elles encapsulent les meilleures pratiques de sécurité, rendant plus difficile l&#8217;introduction d&#8217;erreurs dans le code.</p></div></div></section><section id="_support_des_standards_modernes"><h2>Support des standards modernes</h2><div class="slide-content"><div class="paragraph"><p>Les bibliothèques de sécurité, telles que celles développées par Paragonie, intègrent des algorithmes modernes et des solutions éprouvées, comme Sodium, garantissant une sécurité cryptographique de pointe.</p></div></div></section><section id="_meilleures_pratiques_par_défaut"><h2>Meilleures pratiques par défaut</h2><div class="slide-content"><div class="paragraph"><p>Elles appliquent des meilleures pratiques par défaut, comme l&#8217;utilisation de salage (salt) lors du hachage de mots de passe ou l&#8217;utilisation d&#8217;entropie suffisante pour la génération aléatoire, éliminant ainsi les risques de mauvaises implémentations.</p></div></div></section></section></div></div><script src="node_modules/reveal.js/dist/reveal.js"></script><script>Array.prototype.slice.call(document.querySelectorAll('.slides section')).forEach(function(slide) {
  if (slide.getAttribute('data-background-color')) return;
  // user needs to explicitly say he wants CSS color to override otherwise we might break custom css or theme (#226)
  if (!(slide.classList.contains('canvas') || slide.classList.contains('background'))) return;
  var bgColor = getComputedStyle(slide).backgroundColor;
  if (bgColor !== 'rgba(0, 0, 0, 0)' && bgColor !== 'transparent') {
    slide.setAttribute('data-background-color', bgColor);
    slide.style.backgroundColor = 'transparent';
  }
});

// More info about config & dependencies:
// - https://github.com/hakimel/reveal.js#configuration
// - https://github.com/hakimel/reveal.js#dependencies
Reveal.initialize({
  // Display presentation control arrows
  controls: true,
  // Help the user learn the controls by providing hints, for example by
  // bouncing the down arrow when they first encounter a vertical slide
  controlsTutorial: true,
  // Determines where controls appear, "edges" or "bottom-right"
  controlsLayout: 'bottom-right',
  // Visibility rule for backwards navigation arrows; "faded", "hidden"
  // or "visible"
  controlsBackArrows: 'faded',
  // Display a presentation progress bar
  progress: true,
  // Display the page number of the current slide
  slideNumber: false,
  // Control which views the slide number displays on
  showSlideNumber: 'all',
  // Add the current slide number to the URL hash so that reloading the
  // page/copying the URL will return you to the same slide
  hash: false,
  // Push each slide change to the browser history. Implies `hash: true`
  history: false,
  // Enable keyboard shortcuts for navigation
  keyboard: true,
  // Enable the slide overview mode
  overview: true,
  // Disables the default reveal.js slide layout so that you can use custom CSS layout
  disableLayout: false,
  // Vertical centering of slides
  center: true,
  // Enables touch navigation on devices with touch input
  touch: true,
  // Loop the presentation
  loop: false,
  // Change the presentation direction to be RTL
  rtl: false,
  // See https://github.com/hakimel/reveal.js/#navigation-mode
  navigationMode: 'default',
  // Randomizes the order of slides each time the presentation loads
  shuffle: false,
  // Turns fragments on and off globally
  fragments: true,
  // Flags whether to include the current fragment in the URL,
  // so that reloading brings you to the same fragment position
  fragmentInURL: false,
  // Flags if the presentation is running in an embedded mode,
  // i.e. contained within a limited portion of the screen
  embedded: false,
  // Flags if we should show a help overlay when the questionmark
  // key is pressed
  help: true,
  // Flags if speaker notes should be visible to all viewers
  showNotes: false,
  // Global override for autolaying embedded media (video/audio/iframe)
  // - null: Media will only autoplay if data-autoplay is present
  // - true: All media will autoplay, regardless of individual setting
  // - false: No media will autoplay, regardless of individual setting
  autoPlayMedia: null,
  // Global override for preloading lazy-loaded iframes
  // - null: Iframes with data-src AND data-preload will be loaded when within
  //   the viewDistance, iframes with only data-src will be loaded when visible
  // - true: All iframes with data-src will be loaded when within the viewDistance
  // - false: All iframes with data-src will be loaded only when visible
  preloadIframes: null,
  // Number of milliseconds between automatically proceeding to the
  // next slide, disabled when set to 0, this value can be overwritten
  // by using a data-autoslide attribute on your slides
  autoSlide: 0,
  // Stop auto-sliding after user input
  autoSlideStoppable: true,
  // Use this method for navigation when auto-sliding
  autoSlideMethod: Reveal.navigateNext,
  // Specify the average time in seconds that you think you will spend
  // presenting each slide. This is used to show a pacing timer in the
  // speaker view
  defaultTiming: 120,
  // Specify the total time in seconds that is available to
  // present.  If this is set to a nonzero value, the pacing
  // timer will work out the time available for each slide,
  // instead of using the defaultTiming value
  totalTime: 0,
  // Specify the minimum amount of time you want to allot to
  // each slide, if using the totalTime calculation method.  If
  // the automated time allocation causes slide pacing to fall
  // below this threshold, then you will see an alert in the
  // speaker notes window
  minimumTimePerSlide: 0,
  // Enable slide navigation via mouse wheel
  mouseWheel: false,
  // Hide cursor if inactive
  hideInactiveCursor: true,
  // Time before the cursor is hidden (in ms)
  hideCursorTime: 5000,
  // Hides the address bar on mobile devices
  hideAddressBar: true,
  // Opens links in an iframe preview overlay
  // Add `data-preview-link` and `data-preview-link="false"` to customise each link
  // individually
  previewLinks: false,
  // Transition style (e.g., none, fade, slide, convex, concave, zoom)
  transition: 'slide',
  // Transition speed (e.g., default, fast, slow)
  transitionSpeed: 'default',
  // Transition style for full page slide backgrounds (e.g., none, fade, slide, convex, concave, zoom)
  backgroundTransition: 'fade',
  // Number of slides away from the current that are visible
  viewDistance: 3,
  // Number of slides away from the current that are visible on mobile
  // devices. It is advisable to set this to a lower number than
  // viewDistance in order to save resources.
  mobileViewDistance: 3,
  // Parallax background image (e.g., "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'")
  parallaxBackgroundImage: '',
  // Parallax background size in CSS syntax (e.g., "2100px 900px")
  parallaxBackgroundSize: '',
  // Number of pixels to move the parallax background per slide
  // - Calculated automatically unless specified
  // - Set to 0 to disable movement along an axis
  parallaxBackgroundHorizontal: null,
  parallaxBackgroundVertical: null,
  // The display mode that will be used to show slides
  display: 'block',

  // The "normal" size of the presentation, aspect ratio will be preserved
  // when the presentation is scaled to fit different resolutions. Can be
  // specified using percentage units.
  width: 960,
  height: 700,

  // Factor of the display size that should remain empty around the content
  margin: 0.1,

  // Bounds for smallest/largest possible scale to apply to content
  minScale: 0.2,
  maxScale: 1.5,

  // PDF Export Options
  // Put each fragment on a separate page
  pdfSeparateFragments: true,
  // For slides that do not fit on a page, max number of pages
  pdfMaxPagesPerSlide: 1,

  // Optional libraries used to extend on reveal.js
  dependencies: [
      { src: 'node_modules/reveal.js/plugin/zoom/zoom.js', async: true, callback: function () { Reveal.registerPlugin(RevealZoom) } },
      { src: 'node_modules/reveal.js/plugin/notes/notes.js', async: true, callback: function () { Reveal.registerPlugin(RevealNotes) } }
  ],
});</script><script>var dom = {};
dom.slides = document.querySelector('.reveal .slides');

function getRemainingHeight(element, slideElement, height) {
  height = height || 0;
  if (element) {
    var newHeight, oldHeight = element.style.height;
    // Change the .stretch element height to 0 in order find the height of all
    // the other elements
    element.style.height = '0px';
    // In Overview mode, the parent (.slide) height is set of 700px.
    // Restore it temporarily to its natural height.
    slideElement.style.height = 'auto';
    newHeight = height - slideElement.offsetHeight;
    // Restore the old height, just in case
    element.style.height = oldHeight + 'px';
    // Clear the parent (.slide) height. .removeProperty works in IE9+
    slideElement.style.removeProperty('height');
    return newHeight;
  }
  return height;
}

function layoutSlideContents(width, height) {
  // Handle sizing of elements with the 'stretch' class
  toArray(dom.slides.querySelectorAll('section .stretch')).forEach(function (element) {
    // Determine how much vertical space we can use
    var limit = 5; // hard limit
    var parent = element.parentNode;
    while (parent.nodeName !== 'SECTION' && limit > 0) {
      parent = parent.parentNode;
      limit--;
    }
    if (limit === 0) {
      // unable to find parent, aborting!
      return;
    }
    var remainingHeight = getRemainingHeight(element, parent, height);
    // Consider the aspect ratio of media elements
    if (/(img|video)/gi.test(element.nodeName)) {
      var nw = element.naturalWidth || element.videoWidth, nh = element.naturalHeight || element.videoHeight;
      var es = Math.min(width / nw, remainingHeight / nh);
      element.style.width = (nw * es) + 'px';
      element.style.height = (nh * es) + 'px';
    } else {
      element.style.width = width + 'px';
      element.style.height = remainingHeight + 'px';
    }
  });
}

function toArray(o) {
  return Array.prototype.slice.call(o);
}

Reveal.addEventListener('slidechanged', function () {
  layoutSlideContents(960, 700)
});
Reveal.addEventListener('ready', function () {
  layoutSlideContents(960, 700)
});
Reveal.addEventListener('resize', function () {
  layoutSlideContents(960, 700)
});</script><link rel="stylesheet" href="node_modules/reveal.js/plugin/highlight/monokai.css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/highlight.min.js"></script>

<script>

/* highlightjs-line-numbers.js 2.6.0 | (C) 2018 Yauheni Pakala | MIT License | github.com/wcoder/highlightjs-line-numbers.js */
/* Edited by Hakim for reveal.js; removed async timeout */
!function(n,e){"use strict";function t(){var n=e.createElement("style");n.type="text/css",n.innerHTML=g(".{0}{border-collapse:collapse}.{0} td{padding:0}.{1}:before{content:attr({2})}",[v,L,b]),e.getElementsByTagName("head")[0].appendChild(n)}function r(t){"interactive"===e.readyState||"complete"===e.readyState?i(t):n.addEventListener("DOMContentLoaded",function(){i(t)})}function i(t){try{var r=e.querySelectorAll("code.hljs,code.nohighlight");for(var i in r)r.hasOwnProperty(i)&&l(r[i],t)}catch(o){n.console.error("LineNumbers error: ",o)}}function l(n,e){"object"==typeof n&&f(function(){n.innerHTML=s(n,e)})}function o(n,e){if("string"==typeof n){var t=document.createElement("code");return t.innerHTML=n,s(t,e)}}function s(n,e){e=e||{singleLine:!1};var t=e.singleLine?0:1;return c(n),a(n.innerHTML,t)}function a(n,e){var t=u(n);if(""===t[t.length-1].trim()&&t.pop(),t.length>e){for(var r="",i=0,l=t.length;i<l;i++)r+=g('<tr><td class="{0}"><div class="{1} {2}" {3}="{5}"></div></td><td class="{4}"><div class="{1}">{6}</div></td></tr>',[j,m,L,b,p,i+1,t[i].length>0?t[i]:" "]);return g('<table class="{0}">{1}</table>',[v,r])}return n}function c(n){var e=n.childNodes;for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];h(r.textContent)>0&&(r.childNodes.length>0?c(r):d(r.parentNode))}}function d(n){var e=n.className;if(/hljs-/.test(e)){for(var t=u(n.innerHTML),r=0,i="";r<t.length;r++){var l=t[r].length>0?t[r]:" ";i+=g('<span class="{0}">{1}</span>\n',[e,l])}n.innerHTML=i.trim()}}function u(n){return 0===n.length?[]:n.split(y)}function h(n){return(n.trim().match(y)||[]).length}function f(e){e()}function g(n,e){return n.replace(/{(\d+)}/g,function(n,t){return e[t]?e[t]:n})}var v="hljs-ln",m="hljs-ln-line",p="hljs-ln-code",j="hljs-ln-numbers",L="hljs-ln-n",b="data-line-number",y=/\r\n|\r|\n/g;n.hljs?(n.hljs.initLineNumbersOnLoad=r,n.hljs.lineNumbersBlock=l,n.hljs.lineNumbersValue=o,t()):n.console.error("highlight.js not detected!")}(window,document);

/**
 * This reveal.js plugin is wrapper around the highlight.js
 * syntax highlighting library.
 */
(function( root, factory ) {
  if (typeof define === 'function' && define.amd) {
    root.RevealHighlight = factory();
  } else if( typeof exports === 'object' ) {
    module.exports = factory();
  } else {
    // Browser globals (root is window)
    root.RevealHighlight = factory();
  }
}( this, function() {

  // Function to perform a better "data-trim" on code snippets
  // Will slice an indentation amount on each line of the snippet (amount based on the line having the lowest indentation length)
  function betterTrim(snippetEl) {
    // Helper functions
    function trimLeft(val) {
      // Adapted from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/Trim#Polyfill
      return val.replace(/^[\s\uFEFF\xA0]+/g, '');
    }
    function trimLineBreaks(input) {
      var lines = input.split('\n');

      // Trim line-breaks from the beginning
      for (var i = 0; i < lines.length; i++) {
        if (lines[i].trim() === '') {
          lines.splice(i--, 1);
        } else break;
      }

      // Trim line-breaks from the end
      for (var i = lines.length-1; i >= 0; i--) {
        if (lines[i].trim() === '') {
          lines.splice(i, 1);
        } else break;
      }

      return lines.join('\n');
    }

    // Main function for betterTrim()
    return (function(snippetEl) {
      var content = trimLineBreaks(snippetEl.innerHTML);
      var lines = content.split('\n');
      // Calculate the minimum amount to remove on each line start of the snippet (can be 0)
      var pad = lines.reduce(function(acc, line) {
        if (line.length > 0 && trimLeft(line).length > 0 && acc > line.length - trimLeft(line).length) {
          return line.length - trimLeft(line).length;
        }
        return acc;
      }, Number.POSITIVE_INFINITY);
      // Slice each line with this amount
      return lines.map(function(line, index) {
        return line.slice(pad);
      })
        .join('\n');
    })(snippetEl);
  }

  var RevealHighlight = {

    HIGHLIGHT_STEP_DELIMITER: '|',
    HIGHLIGHT_LINE_DELIMITER: ',',
    HIGHLIGHT_LINE_RANGE_DELIMITER: '-',

    init: function( reveal ) {

      // Read the plugin config options and provide fallbacks
      var config = Reveal.getConfig().highlight || {};
      config.highlightOnLoad = typeof config.highlightOnLoad === 'boolean' ? config.highlightOnLoad : true;
      config.escapeHTML = typeof config.escapeHTML === 'boolean' ? config.escapeHTML : true;

      [].slice.call( reveal.getRevealElement().querySelectorAll( 'pre code' ) ).forEach( function( block ) {

        block.parentNode.className = 'code-wrapper';

        // Code can optionally be wrapped in script template to avoid
        // HTML being parsed by the browser (i.e. when you need to
        // include <, > or & in your code).
        let substitute = block.querySelector( 'script[type="text/template"]' );
        if( substitute ) {
          // textContent handles the HTML entity escapes for us
          block.textContent = substitute.innerHTML;
        }

        // Trim whitespace if the "data-trim" attribute is present
        if( block.hasAttribute( 'data-trim' ) && typeof block.innerHTML.trim === 'function' ) {
          block.innerHTML = betterTrim( block );
        }

        // Escape HTML tags unless the "data-noescape" attrbute is present
        if( config.escapeHTML && !block.hasAttribute( 'data-noescape' )) {
          block.innerHTML = block.innerHTML.replace( /</g,"&lt;").replace(/>/g, '&gt;' );
        }

        // Re-highlight when focus is lost (for contenteditable code)
        block.addEventListener( 'focusout', function( event ) {
          hljs.highlightElement( event.currentTarget );
        }, false );

        if( config.highlightOnLoad ) {
          RevealHighlight.highlightBlock( block );
        }
      } );

      // If we're printing to PDF, scroll the code highlights of
      // all blocks in the deck into view at once
      reveal.on( 'pdf-ready', function() {
        [].slice.call( reveal.getRevealElement().querySelectorAll( 'pre code[data-line-numbers].current-fragment' ) ).forEach( function( block ) {
          RevealHighlight.scrollHighlightedLineIntoView( block, {}, true );
        } );
      } );
    },

    /**
     * Highlights a code block. If the <code> node has the
     * 'data-line-numbers' attribute we also generate slide
     * numbers.
     *
     * If the block contains multiple line highlight steps,
     * we clone the block and create a fragment for each step.
     */
    highlightBlock: function( block ) {

      hljs.highlightElement( block );

      // Don't generate line numbers for empty code blocks
      if( block.innerHTML.trim().length === 0 ) return;

      if( block.hasAttribute( 'data-line-numbers' ) ) {
        hljs.lineNumbersBlock( block, { singleLine: true } );

        var scrollState = { currentBlock: block };

        // If there is at least one highlight step, generate
        // fragments
        var highlightSteps = RevealHighlight.deserializeHighlightSteps( block.getAttribute( 'data-line-numbers' ) );
        if( highlightSteps.length > 1 ) {

          // If the original code block has a fragment-index,
          // each clone should follow in an incremental sequence
          var fragmentIndex = parseInt( block.getAttribute( 'data-fragment-index' ), 10 );

          if( typeof fragmentIndex !== 'number' || isNaN( fragmentIndex ) ) {
            fragmentIndex = null;
          }

          // Generate fragments for all steps except the original block
          highlightSteps.slice(1).forEach( function( highlight ) {

            var fragmentBlock = block.cloneNode( true );
            fragmentBlock.setAttribute( 'data-line-numbers', RevealHighlight.serializeHighlightSteps( [ highlight ] ) );
            fragmentBlock.classList.add( 'fragment' );
            block.parentNode.appendChild( fragmentBlock );
            RevealHighlight.highlightLines( fragmentBlock );

            if( typeof fragmentIndex === 'number' ) {
              fragmentBlock.setAttribute( 'data-fragment-index', fragmentIndex );
              fragmentIndex += 1;
            }
            else {
              fragmentBlock.removeAttribute( 'data-fragment-index' );
            }

            // Scroll highlights into view as we step through them
            fragmentBlock.addEventListener( 'visible', RevealHighlight.scrollHighlightedLineIntoView.bind( Plugin, fragmentBlock, scrollState ) );
            fragmentBlock.addEventListener( 'hidden', RevealHighlight.scrollHighlightedLineIntoView.bind( Plugin, fragmentBlock.previousSibling, scrollState ) );

          } );

          block.removeAttribute( 'data-fragment-index' )
          block.setAttribute( 'data-line-numbers', RevealHighlight.serializeHighlightSteps( [ highlightSteps[0] ] ) );

        }

        // Scroll the first highlight into view when the slide
        // becomes visible. Note supported in IE11 since it lacks
        // support for Element.closest.
        var slide = typeof block.closest === 'function' ? block.closest( 'section:not(.stack)' ) : null;
        if( slide ) {
          var scrollFirstHighlightIntoView = function() {
            RevealHighlight.scrollHighlightedLineIntoView( block, scrollState, true );
            slide.removeEventListener( 'visible', scrollFirstHighlightIntoView );
          }
          slide.addEventListener( 'visible', scrollFirstHighlightIntoView );
        }

        RevealHighlight.highlightLines( block );

      }

    },

    /**
     * Animates scrolling to the first highlighted line
     * in the given code block.
     */
    scrollHighlightedLineIntoView: function( block, scrollState, skipAnimation ) {

      cancelAnimationFrame( scrollState.animationFrameID );

      // Match the scroll position of the currently visible
      // code block
      if( scrollState.currentBlock ) {
        block.scrollTop = scrollState.currentBlock.scrollTop;
      }

      // Remember the current code block so that we can match
      // its scroll position when showing/hiding fragments
      scrollState.currentBlock = block;

      var highlightBounds = RevealHighlight.getHighlightedLineBounds( block )
      var viewportHeight = block.offsetHeight;

      // Subtract padding from the viewport height
      var blockStyles = getComputedStyle( block );
      viewportHeight -= parseInt( blockStyles.paddingTop ) + parseInt( blockStyles.paddingBottom );

      // Scroll position which centers all highlights
      var startTop = block.scrollTop;
      var targetTop = highlightBounds.top + ( Math.min( highlightBounds.bottom - highlightBounds.top, viewportHeight ) - viewportHeight ) / 2;

      // Account for offsets in position applied to the
      // <table> that holds our lines of code
      var lineTable = block.querySelector( '.hljs-ln' );
      if( lineTable ) targetTop += lineTable.offsetTop - parseInt( blockStyles.paddingTop );

      // Make sure the scroll target is within bounds
      targetTop = Math.max( Math.min( targetTop, block.scrollHeight - viewportHeight ), 0 );

      if( skipAnimation === true || startTop === targetTop ) {
        block.scrollTop = targetTop;
      }
      else {

        // Don't attempt to scroll if there is no overflow
        if( block.scrollHeight <= viewportHeight ) return;

        var time = 0;
        var animate = function() {
          time = Math.min( time + 0.02, 1 );

          // Update our eased scroll position
          block.scrollTop = startTop + ( targetTop - startTop ) * RevealHighlight.easeInOutQuart( time );

          // Keep animating unless we've reached the end
          if( time < 1 ) {
            scrollState.animationFrameID = requestAnimationFrame( animate );
          }
        };

        animate();

      }

    },

    /**
     * The easing function used when scrolling.
     */
    easeInOutQuart: function( t ) {

      // easeInOutQuart
      return t<.5 ? 8*t*t*t*t : 1-8*(--t)*t*t*t;

    },

    getHighlightedLineBounds: function( block ) {

      var highlightedLines = block.querySelectorAll( '.highlight-line' );
      if( highlightedLines.length === 0 ) {
        return { top: 0, bottom: 0 };
      }
      else {
        var firstHighlight = highlightedLines[0];
        var lastHighlight = highlightedLines[ highlightedLines.length -1 ];

        return {
          top: firstHighlight.offsetTop,
          bottom: lastHighlight.offsetTop + lastHighlight.offsetHeight
        }
      }

    },

    /**
     * Visually emphasize specific lines within a code block.
     * This only works on blocks with line numbering turned on.
     *
     * @param {HTMLElement} block a <code> block
     * @param {String} [linesToHighlight] The lines that should be
     * highlighted in this format:
     * "1" 		= highlights line 1
     * "2,5"	= highlights lines 2 & 5
     * "2,5-7"	= highlights lines 2, 5, 6 & 7
     */
    highlightLines: function( block, linesToHighlight ) {

      var highlightSteps = RevealHighlight.deserializeHighlightSteps( linesToHighlight || block.getAttribute( 'data-line-numbers' ) );

      if( highlightSteps.length ) {

        highlightSteps[0].forEach( function( highlight ) {

          var elementsToHighlight = [];

          // Highlight a range
          if( typeof highlight.end === 'number' ) {
            elementsToHighlight = [].slice.call( block.querySelectorAll( 'table tr:nth-child(n+'+highlight.start+'):nth-child(-n+'+highlight.end+')' ) );
          }
          // Highlight a single line
          else if( typeof highlight.start === 'number' ) {
            elementsToHighlight = [].slice.call( block.querySelectorAll( 'table tr:nth-child('+highlight.start+')' ) );
          }

          if( elementsToHighlight.length ) {
            elementsToHighlight.forEach( function( lineElement ) {
              lineElement.classList.add( 'highlight-line' );
            } );

            block.classList.add( 'has-highlights' );
          }

        } );

      }

    },

    /**
     * Parses and formats a user-defined string of line
     * numbers to highlight.
     *
     * @example
     * RevealHighlight.deserializeHighlightSteps( '1,2|3,5-10' )
     * // [
     * //   [ { start: 1 }, { start: 2 } ],
     * //   [ { start: 3 }, { start: 5, end: 10 } ]
     * // ]
     */
    deserializeHighlightSteps: function( highlightSteps ) {

      // Remove whitespace
      highlightSteps = highlightSteps.replace( /\s/g, '' );

      // Divide up our line number groups
      highlightSteps = highlightSteps.split( RevealHighlight.HIGHLIGHT_STEP_DELIMITER );

      return highlightSteps.map( function( highlights ) {

        return highlights.split( RevealHighlight.HIGHLIGHT_LINE_DELIMITER ).map( function( highlight ) {

          // Parse valid line numbers
          if( /^[\d-]+$/.test( highlight ) ) {

            highlight = highlight.split( RevealHighlight.HIGHLIGHT_LINE_RANGE_DELIMITER );

            var lineStart = parseInt( highlight[0], 10 ),
              lineEnd = parseInt( highlight[1], 10 );

            if( isNaN( lineEnd ) ) {
              return {
                start: lineStart
              };
            }
            else {
              return {
                start: lineStart,
                end: lineEnd
              };
            }

          }
          // If no line numbers are provided, no code will be highlighted
          else {

            return {};

          }

        } );

      } );

    },

    /**
     * Serializes parsed line number data into a string so
     * that we can store it in the DOM.
     */
    serializeHighlightSteps: function( highlightSteps ) {

      return highlightSteps.map( function( highlights ) {

        return highlights.map( function( highlight ) {

          // Line range
          if( typeof highlight.end === 'number' ) {
            return highlight.start + RevealHighlight.HIGHLIGHT_LINE_RANGE_DELIMITER + highlight.end;
          }
          // Single line
          else if( typeof highlight.start === 'number' ) {
            return highlight.start;
          }
          // All lines
          else {
            return '';
          }

        } ).join( RevealHighlight.HIGHLIGHT_LINE_DELIMITER );

      } ).join( RevealHighlight.HIGHLIGHT_STEP_DELIMITER );

    }

  }

  Reveal.registerPlugin( 'highlight', RevealHighlight );

  return RevealHighlight;

}));
        
hljs.configure({
  ignoreUnescapedHTML: true,
});
hljs.highlightAll();
</script></body></html>